<div class="login-container">
  <main role="main" aria-labelledby="login-title">
    <mat-card class="login-card" @fadeIn>
      <mat-card-header>
        <mat-card-title id="login-title">Bienvenido</mat-card-title>
        <mat-card-subtitle>Ingresa tu correo para continuar</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <form
          [formGroup]="loginForm"
          (ngSubmit)="onSubmit()"
          aria-label="Formulario de inicio de sesión"
        >
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Correo electrónico</mat-label>
            <input
              matInput
              type="email"
              formControlName="email"
              placeholder="ejemplo@correo.com"
              [disabled]="isLoading()"
              aria-required="true"
              aria-describedby="email-hint"
              autocomplete="email"
            />
            <mat-hint id="email-hint">Ingresa tu correo para iniciar sesión o crear una cuenta</mat-hint>
            @if (loginForm.get('email')?.touched && loginForm.get('email')?.invalid) {
              <mat-error role="alert">{{ getErrorMessage('email') }}</mat-error>
            }
          </mat-form-field>

          @if (errorMessage()) {
            <div class="error-message" role="alert" aria-live="polite">
              {{ errorMessage() }}
            </div>
          }

          <button
            mat-raised-button
            color="primary"
            type="submit"
            class="full-width"
            [disabled]="isLoading()"
            [attr.aria-label]="isLoading() ? 'Iniciando sesión, por favor espere' : 'Ingresar con tu correo electrónico'"
          >
            @if (isLoading()) {
              <mat-spinner diameter="20" aria-label="Cargando"></mat-spinner>
            } @else {
              Ingresar
            }
          </button>
        </form>
      </mat-card-content>
    </mat-card>
  </main>
</div>
